<!DOCTYPE html>
<html>
    <head>
        <title>TÚCAN SPEAK</title>

        <link rel="icon" type="image/x-icon" href="favicon.ico">
        <link rel="stylesheet" href="https://use.typekit.net/zvd8nfm.css">
        <link rel="stylesheet" href="main.css">
        
        <meta name="description" content="">
        <meta name="keywords" content="AI ChatGPT Language Education Teaching"> 
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <script src="https://code.jquery.com/jquery-3.7.0.js" integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script src="sketches.js" type="text/javascript"></script>
        <script src="main.js"></script> 

    </head>

    <body onload="setCookie()">
        <div id="header">
            <div><a href="/"><strong>TÚCAN SPEAK</strong></a></div>
            <div><a href="/">HOME</a></div>
            <div><a href="/about.html">ABOUT</a></div> 
            <div><a href="/resources.html">ADDITIONAL RESOURCES</a></div>
            <div>LANGUAGE:</div>
            <button onclick="changeLanguage()"><img id="flag"/></button>
        </div>

        <br><br>
        <div class="pageContainer">
            <div class="contentWrap">
                <br>
                <div id="headLogo"><img src="logo.png"></div>
                <br>
                <div id="chat"></div>
                <form id="ask-form" onsubmit="return handleSubmit(event);">
                    <div class="wrap">    
                        <div class="search">
                            <input onclick="clickOnChat()" type="text" class="searchTerm" id="searchTerm0" name="searchTerm" placeholder="What would you like to know?">
                            <button type="submit" class="searchButton">
                                <img id="icon" src="search.png">
                            </button>
                        </div>
                    </div>
                </form>
                <div id="answer"></div>
            </div>
            <div id="footer"></div>
        </div>

        <img class="overlay" id="overlay1" src="overlay.png">
        <!-- <img class="overlay" id="overlay2" src="overlay2.png"> -->
    </body>

    <script>
        const form = document.getElementById('ask-form');
        const searchTermInput = document.querySelector("#searchTerm0");
        const answerElement = document.getElementById('chat');

        async function handleSubmit(event) {
            event.preventDefault();

            const searchTerm = searchTermInput.value;
            try {
                const response = await axios.post('/ask', { searchTerm });
                answerElement.innerText = response.data.answer.trim();
            } catch (error) {
                console.error(error);
                alert('An error occurred while processing your request.');
            }
            return false;
        }
    </script>
</html>